(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{473:function(t,s,a){"use strict";a.r(s);var n=a(1),r=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("JavaScript单线程，异步同步问题的困扰"),s("br"),t._v(" "),s("img",{attrs:{src:"http://image.icey.cc/2018-10-07-003816.jpg",alt:""}})]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"node"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#node"}},[t._v("#")]),t._v(" node")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("NVM ：node的版本工具")])]),t._v(" "),s("li",[s("p",[t._v("事件驱动")])]),t._v(" "),s("li",[s("p",[t._v("主线程是单线程 异步，callback,后续的逻辑。")]),t._v(" "),s("blockquote",[s("p",[t._v("后面干活的是多线程，是内核\n操作文件的交给后面的多线程，业务交给主程序单线程\n阻塞不能异步\n阻塞是针对内核说的\nIo操作。读写操作。异步读写。能用异步就不用")])])]),t._v(" "),s("li",[s("p",[t._v("web异步\n同步异步\n阻塞非阻塞")])])]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"javascript"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#javascript"}},[t._v("#")]),t._v(" Javascript")]),t._v(" "),s("ul",[s("li",[t._v("javascript是单线程的\n"),s("ul",[s("li",[t._v("临界资源冲突： 因为JavaScript语言提供了大量的交互操作，dom操作，css样式操作，还有服务端端操作。如果是多线程，多个线程对同一个文件进行操作，会出现冲突。比如进程A要删除DOM，进程B要修改DOM，多进程的话就会冲突。为了降低复杂性，javascript采用了单线程。")]),t._v(" "),s("li",[t._v("假死状态：单线程就好比一个餐厅只能同时给一个顾客服务，新来的顾客就会在后面排队，前面的顾客吃完才能再走，如果前面顾客停留时间过长，就会造成阻塞，浏览器会失去响应。进入假死。")])])]),t._v(" "),s("li",[t._v("同步和异步\n"),s("ul",[s("li",[t._v("但是大多时间cpu都是空闲的，如果JavaScript因为请求很慢，不得不等结果出来再往下执行，页面就会加载很慢。于是JavaScript任务执行模式又分两种：同步模式和异步模式")]),t._v(" "),s("li",[t._v("同步模式：主线程按照任务队列的顺序执行任务。程序的执行顺序和任务列表是一致的同步的。")]),t._v(" "),s("li",[t._v("异步模式：异步任务（比如http请求）不进入主程序列表，只进入消息通知，只有当消息队列通知主程序时，该任务才进入的主程序的队列中执行。也就是回调函数。")])])]),t._v(" "),s("li",[t._v("调用栈 先入后出； 回调队列先入先出")])]),t._v(" "),s("h2",{attrs:{id:"javascript异步的方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#javascript异步的方法"}},[t._v("#")]),t._v(" JavaScript异步的方法")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("回调函数")]),t._v(" "),s("ul",[s("li",[t._v("回调函数：把函数以参数的形式传递给另一个函数，在等到要执行这个任务的时候，就直接调用这个函数。")]),t._v(" "),s("li",[t._v("利用回调函数实现异步的方法有：\n"),s("ul",[s("li",[t._v("事件监听")]),t._v(" "),s("li",[t._v("发布订阅")]),t._v(" "),s("li",[t._v("计时函数")])])]),t._v(" "),s("li",[t._v("缺点\n"),s("ul",[s("li",[t._v("回调地狱")]),t._v(" "),s("li",[t._v("严重耦合")])])])])]),t._v(" "),s("li",[s("p",[t._v("promise函数")]),t._v(" "),s("ul",[s("li",[t._v("commonJS的一种规范，为异步编程提供一种接口")]),t._v(" "),s("li",[t._v("例子")])]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ascynFunc")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("reject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a>1'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a<=1'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ascynFunc")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("catch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br")])])]),t._v(" "),s("li",[s("p",[t._v("Generator / yield函数  es6")])]),t._v(" "),s("li",[s("p",[t._v("async / await函数  es7")]),t._v(" "),s("ul",[s("li",[t._v("co函数库 "),s("a",{attrs:{href:"https://www.cnblogs.com/stephenykk/p/5812738.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("转: ES6异步编程: co函数库的含义与用法 - stephenykk - 博客园"),s("OutboundLink")],1)])])])])])}),[],!1,null,null,null);s.default=r.exports}}]);